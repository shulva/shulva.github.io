# Vim移动及跳转

## 常用跳转动作

> [!NOTE] 跳转命令
> 任何改变当前窗口中活动文件的命令，都可以被称为跳转命令。可以用 \<C-o> 和 \<C-i> 命令在打开新文件以及原本的文件之间来回跳转。

| 命令                               | 用途               |
| -------------------------------- | ---------------- |
| [count]G                         | 跳转到指定的行号         |
| /pattern\<CR>/?pattern\<CR>  n/N | 跳转到下一个/上一个模式出现之处 |
| %                                | 跳转到匹配的括号所在之处     |
| ( 或 )                            | 跳转到上一句/下一句的开头    |
| { 或 }                            | 跳转到上一段/下一段的开头    |
| H/M/L                            | 跳到屏幕最上方/正中间/最下方  |
| gf                               | 跳转到光标下的文件名       |
| <C-]>                            | 跳转到光标下关键字的定义之处   |
| '{mark}/\`{mark}<br>             | 跳转到一个位置标记        |
| :jumps<br>                       | 查看跳转列表的内容        |
| :changes                         | 查看改变列表的内容        |
| g;                               | 跳转到修改的位置（向后）     |
| g,                               | 跳转到修改的位置（向前）     |
| g_                               | 移动到当前行的最后的非空白字符  |

## 区分实际行与屏幕行

> [!NOTE] 实际行与屏幕行
> 当一行文本因为过多而为适应窗口宽度而回绕时，回绕行的前面不会显示行号，多出来的行就是屏幕行，句子本身则是实际行。你现在看的这个句子便是理解实际行与屏幕行的一个示例。你可以用下方表格中的命令来尝试一下。

| 操作  | 效果              |
| --- | --------------- |
| gj  | 向下移动一个屏幕行       |
| gk  | 向上移动一个屏幕行       |
| g0  | 移动到屏幕行的行首       |
| g^  | 移动到屏幕行的第一个非空白字符 |
| g$  | 移动到屏幕行的行尾       |
不带g的操作移动的都是实际行。

## 基于单词移动

| 操作  | 光标动作              |
| --- | ----------------- |
| ge  | 反向移动到上一单词的结尾      |
| W   | 正向移动到下一字串单词的开头    |
| B   | 反向移动到当前字串/上一字串的开头 |
| E   | 正向移动到当前字串/下一字串的结尾 |
| gE  | 反向移动到上一字串的结尾      |

> [!NOTE] 字串？
> 简单理解，字串比单词更长。两者在vim中的严格定义(:h word)在我眼里感觉挺奇怪的。

## 对字符进行查找

![Vim-查找及替换](2-a-2-a%20（普通模式）.md#Vim-查找及替换)

> [!NOTE] f与t的差别
> 可以把 t{char} 及 T{char} 命令当成“直到查找到指定的字符为止”（search till the specified character）的命令，它们使光标停留在 {char} 前面的那个字符上， f{char} 和 F{char} 命令则把光标移动到指定字符上。

> [!exam]
> [为什么同时需要两种查找字符命令呢？](../../../files/books/Tools/Vim.pdf#page=198&selection=86,0,86,19)
> [在使用字符查找命令时，最好选择出现频率比较低的字母作目标字符](../../../files/books/Tools/Vim.pdf#page=199&selection=103,0,103,15)

## 用精确的文本对象选择选区

> [!NOTE] 文本对象
> **1:**文本对象允许操作括号、被引用的文本、XML标签以及其他文本中的常见结构。这些配对符号具有规整的格式，而Vim 能够理解其结构，并允许对它们分隔的区域进行操作。
> 
> **2:**以 i 开头的文本对象会选择分隔符内部的文本,以 a 开头的文本对象会选择包括分隔符在内的整个文本

| 文本对象     | 选区                                 | 文本对象     | 选区                             |
| -------- | ---------------------------------- | -------- | ------------------------------ |
| a(round) |                                    | i(nside) |                                |
| a) 或 ab  | 一对圆括号                              | i) 或 ib  | 圆括号内部                          |
| a} 或 aB  | 一对花括号                              | i} 或 iB  | 花括号内部                          |
| a]       | 一对方括号                              | i]       | 方括号内部                          |
| a>       | 一对尖括号                              | i>       | 尖括号内部                          |
| a'       | 一对单引号                              | i'       | 单引号内部                          |
| a"       | 一对双引号                              | i"       | 双引号内部                          |
| a`       | 一对反引号                              | i`       | 反引号内部                          |
| at       | 一对 XML 标签<br>**\<xml>tags\</xml>** | it       | XML 标签内部 \<xml>**tags**\</xml> |

> [!NOTE] 文本对象
> Vim 的文本对象分为两类：一类是操作分隔符的文本对象，如 i)、i" 和it；另一类用于操作文本块，如单词、句子和段落。

| 文本对象 | 选区                 |
| ---- | ------------------ |
| iw   | 当前单词               |
| aw   | 当前单词及前面或后面的任意个空白字符 |
| iW   | 当前字串               |
| aW   | 当前字串及前面或后面的任意个空白字符 |
| is   | 当前句子               |
| as   | 当前句子及前面或后面的任意个空白字符 |
| ip   | 当前段落               |
| ap   | 当前段落及前面或后面的任意个空白字符 |

## 在匹配的括号间跳转

> [!NOTE] 括号间跳转
> **1:**% 命令允许在一组开、闭括号间跳转（参见 :h % ），它可作用于 ()、{}以及[]
> **2:** Vim 在发布时带了一个名为 matchit的插件，它增强了 % 命令的功能。激活此插件后，% 命令就可以在**配对的关键字间**跳转。例如，在一 个HTML文件里，用 % 命令可以在开标签和闭标签间跳转。
> **3:** 无需担心，lazyvim开启了这个功能。

## 使用位置标记跳转

> [!NOTE] 标记
> **1:** m{a-zA-Z} 命令会用选定的字母标记当前光标所在位置（参见 :h m ）。小写位置标记只在每个缓冲区局部可见，大写位置标记则全局可见。
> **2:** 当需要浏览一些文件，然后再快速跳回到原处时，全局标记会显得特别有用。
> **3:** '{mark} 命令跳到位置标记所在行，并把光标置于该行第一个非空白字符上；\`{mark} 命令则把光标移动到设置此位置标记时光标所在之处，也就是说，它同时恢复行、列的位置（参见 :h mark-motions ）。

| 位置标记 | 跳转到              |
| ---- | ---------------- |
| ``   | 当前文件中上次跳转动作之前的位置 |
| `.   | 上次修改的地方          |
| `^   | 上次插入的地方          |
| `[   | 上次修改或复制的起始位置     |
| `]   | 上次修改或复制的结束位置     |
| `<   | 上次高亮选区的起始位置      |
| `>   | 上次高亮选区的结束位置      |

> [!NOTE] 快速回归插入的地方
> '^ 标记指向上次插入的位置，它比上次修改的位置更具体一点。 如果先退出插入模式，接着又在文档中四处移动，然后又想快速回到退出的地方继续编辑时，用 gi 命令就行了（:h gi ）。此命令会用 \`^ 标记恢复光标位置，并切换到插入模式，这真是省时省力的好办法！