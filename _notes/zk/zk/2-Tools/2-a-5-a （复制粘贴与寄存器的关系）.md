# 复制粘贴与寄存器的关系
## 寄存器

> [!NOTE] 无名寄存器（""）
> Vim的删除、复制与粘贴命令都会用到众多寄存器中的某一个。可以通过给命令加 "{register} 前缀的方式指定要用的寄存器。若不指明，Vim将默认使用无名寄存器。 x、s、d{motion}、c{motion} 与 y{motion} 命令（以及它们对应的大写命令）都会覆盖无名寄存器中的内容。
>

> [!NOTE]  复制专用寄存器（"0）
> 当使用 y{motion} 命令时，要复制的文本不仅会被拷贝到无名寄存器中，而且也被拷贝到了复制专用寄存器中，后者可用数字0（参见 :h quote0 ）加以引用。其仅当使用 y{motion} 命令时才会被赋值。换句话讲，使用 x、s、c{motion} 以及 d{motion} 命令均不会覆盖该寄存器。

> [!NOTE] 黑洞寄存器（"\_）
> 黑洞寄存器是个有去无回的地方，可用下画线（参见 :h quote_ ）引用它。如果运行 "\_d{motion} 命令，Vim将删除该文本且不保 存任何副本。只想删除文本却不想覆盖无名寄存器中的内容时，此命令 很管用。

> [!NOTE] 系统剪贴板（"+）与选择专用寄存器（"\*）
> Vim的加号寄存器与系统剪贴板等效，可用 + 号（参见 :h quote+ ）引用。 
> Windows与Mac OS X操作系统并没有主剪贴板的概念，因此 "+ 寄 存器与 "* 寄存器可以混用，它们都代表系统剪贴板。

> [!NOTE] 表达式寄存器（"=）
> 当从表达式寄存器获取内容时，Vim将跳到命令行模式，并显示提示符“=”。这时，可以输入一段Vim脚本表达式并按 \<CR> 执行，如果返回的是字符串（或者可被强制转换成字符串的数据），Vim将会使用它。

| 操作                   | 结果                              |
| -------------------- | ------------------------------- |
| "ayiw                | 把当前单词复制到寄存器a中                   |
| "bdd<br>             | 把当前整行文本剪切至寄存器b中                 |
| "\_d{motion}<br><br> | Vim将删除该文本且不保存任何副本，不会覆盖无名寄存器中的内容 |
| "+p                  | 将在外部程序中用剪切或复制命令获取的文本粘贴到Vim内部    |
| "0P                  | 粘贴来自复制专用寄存器中的内容                 |
|                      |                                 |

| 只读寄存器 | 内容        |     |
| ----- | --------- | --- |
| "%    | 当前文件名     |     |
| "#    | 轮换文件名     |     |
| ".    | 上次插入的文本   |     |
| ":    | 上次执行的Ex命令 |     |
| "/    | 上次查找的模式   |     |

## 与寄存器交互

> [!NOTE] 用寄存器中的内容替换高亮选区的文本
> 在可视模式下使用 p 命令时，Vim将用指定的寄存器内容来替换高亮选区中的文本（参见 :h v_p ）。你可以尝试一下`yiw-ve-p`的命令组合体会其的便利。

> [!NOTE] Vim在可视化粘贴时的特性
> 在Vim的可视模式下使用 p 命令时，首先，Vim会从无名寄存器里取出内容，然后，把高亮选区中的内容存入无名寄存器。相当于高亮选区中的内容与寄存器的文本被调换了。可以利用这个特性便捷地交换两个单词。

> [!example]
> [用寄存器中的内容替换高亮选区的文本](../../../files/books/Tools/Vim.pdf#page=244&selection=23,0,23,4)
> [交换两个词](../../../files/books/Tools/Vim.pdf#page=245&selection=57,0,57,5)