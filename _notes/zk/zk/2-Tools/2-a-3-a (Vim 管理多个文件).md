# Vim文件

## 缓冲区

> [!NOTE] 缓冲区
> **1:**就像其他任一文本编辑器一样，Vim允许读取、编辑文件，并保存修改。在工作过程中，我们通常会说“我们正在编辑一个文件”，但真实情况并不是这样，我们编辑的只是文件在内存中的映像，也就是Vim术语中的“缓冲区”。
>
> **2:**Vim 内置的缓冲区管理功能缺乏灵活性。如果想对缓冲区进行组织，使其满足工作过程的需要，使用缓冲区列表并不是最佳选择。最好是把工作区划分成多个分割窗口、标签页，或是使用参数列表。
>
> **3:**个人认为lazyvim以及其他各种ide上的标签页功能做的比vim缓冲区更好。
>
> **4.**删除一个缓冲区并不会影响缓冲区关联的文件，而只是简单地把该文件在内存中的映像删掉。如果想删除编号5～10（包含5和10）的缓冲区，可以执行 :5,10bd；然而，如果想要保留编号为8的缓冲区，就只能用 :bd 5 6 7 9 10了。

| 命令            | 效果                |
| ------------- | ----------------- |
| :ls           | 列出所有被载入内存中的缓冲区的列表 |
| :bnext        | 切换到列表中的下一个缓冲区     |
| :bprev        | 切换到列表中的上一个缓冲区<br> |
| :bfirst       | 跳到列表的开头           |
| :blast        | 跳到列表的结尾           |
| :bdelete(arg) | 删除指定的缓冲区          |

## 参数列表

> [!NOTE] 参数列表
> 参数列表记录了在启动时作为参数传递给Vim的文件列表。
> 

| 命令                 | 效果                                                 |
| ------------------ | -------------------------------------------------- |
| :args              | 不带参数运行 :args 命令时，它会打印当前参数列表的内容                     |
| :args {list}       | 设置参数列表的内容，{list} 可以包括文件名、通配符，甚至是一条 shell 命令的输 出结果。 |
| :args\`{cmd}\`<br> | Vim 会在 shell 中执行反撇号括起来的命令，然后把cmd的输出作为 :args命令的参数   |
| :next              | 参数列表中的下一个文件                                        |
| :prev<br>          | 参数列表中的上一个文件                                        |
| :argdo             | 在列表中的每个缓冲区上执行同一条命令                                 |
|                    |                                                    |

## 缓冲区与窗口

> [!NOTE] 缓冲区与窗口的关系
> 在Vim术语中，窗口是缓冲区的显示区域(:h window)。既可以打开多个窗口，在这些窗口中显示同一个缓冲区，也可以在每个窗口里载入不同的缓冲区。

| 命令                 | 用途                      |
| ------------------ | ----------------------- |
| \<C-w> s<br>       | 水平切分当前窗口，新窗口仍显示当前缓冲区    |
| \<C-w> v           | 垂直切分当前窗口，新窗口仍显示当前缓冲区    |
| \<C-w> w           | 在窗口间循环切换                |
| \<C-w> h           | 切换到左边的窗口                |
| \<C-w> j           | 切换到下边的窗口                |
| \<C-w> k           | 切换到上边的窗口                |
| \<C-w> l           | 切换到右边的窗口                |
| :sp[lit] {file}    | 水平切分当前窗口，并在新窗口中载入{file} |
| :vsp[lit] {file}   | 垂直切分当前窗口，并在新窗口中载入{file} |
| \<C-w>c 或 :clo[se] | 关闭活动窗口                  |
| \<C-w>o 或 :on[ly]  | 只保留活动窗口，关闭其他所有窗口        |
| \<C-w> =           | 使所有窗口等宽、等高              |
| \<C-w> _           | 最大化活动窗口的高度              |
| \<C-w> \|          | 最大化活动窗口的宽度              |
| [N] \<C-w>_        | 把活动窗口的高度设为[N]行          |
| [N] \<C-w> \|      | 把活动窗口的宽度设为[N]列          |


## 窗口与标签页

> [!NOTE] 窗口与标签页的关系
> Vim 的标签页与缓冲区并非一一对应的关系（类似Tmux），你应该把标签页想成容纳一系列窗口的容器。
> ![vim-tab](../../../files/images/zk/vim-tab.png)

| 命令                     | 用途                  |
| ---------------------- | ------------------- |
| :tabedit               | 创建一个新标签页，里面包含一个空缓冲区 |
| :tabe[dit] {filename}  | 在新标签页中打开 {filename} |
| \<C-w>T                | 把当前窗口移到一个新标签页       |
| :tabc[lose]            | 关闭当前标签页及其中的所有窗口     |
| :tabo[nly]<br>         | 只保留活动标签页，关闭所有其他标签页  |
| {N}gt 或 :tabn[ext] {N} | 切换到编号为 {N} 的标签页     |
| gt 或 :tabn[ext]        | 切换到下一标签页            |
| gT 或 :tabp[revious]    | 切换到上一标签页            |


## Vim 打开及保存文件

| 命令           | 效果                |
| ------------ | ----------------- |
| :edit {file} | 打开file文件          |
| :find {file} | 在path中查找file文件并打开 |

> [!NOTE] 以root权限保存文件
> `:w !sudo tee % > /dev/null`
> [这条命令是如何工作的？](../../../files/books/Tools/Vim.pdf#page=181&selection=72,0,72,11)
> 
